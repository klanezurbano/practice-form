<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Registration Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet" />
  </head>
  <body>
    <div class="container">
      <main class="w-75 mx-auto">
        <div class="bg-light m-5 p-3">
          <a href="index.html">Already have an account?</a>
          <h3 class="text-center text-uppercase">Registration Page</h3>
          <form
            action="#"
            onsubmit="alertSuccess()"
            class="d-flex flex-column align-items-center">
            <fieldset class="p-3">
              <legend>
                Login Details
                <span class="text-danger fs-6">
                  (all fields should be required)
                </span>
              </legend>

              <div class="row row-cols-2 mx-auto p-3">
                <label for="email-address" class="form-label col-4">
                  Email Address
                </label>
                <div class="col-8 mb-2">
                  <input
                    type="email"
                    name="email-address"
                    id="email-address"
                    class="form-control" />
                  <span
                    id="email-address-error"
                    class="text-danger fs-6 d-none form-error"></span>
                </div>
                <label for="password" class="form-label col-4">Password</label>
                <div class="col-8 mb-2">
                  <input
                    type="password"
                    name="password"
                    id="password"
                    class="form-control" />
                  <span
                    id="password-error"
                    class="text-danger fs-6 d-none form-error"></span>
                </div>
                <label for="confirm-password" class="form-label col-4">
                  Confirm Password
                </label>
                <div class="col-8 mb-2">
                  <input
                    type="password"
                    name="confirm-password"
                    id="confirm-password"
                    class="form-control" />
                </div>
              </div>
            </fieldset>
            <fieldset class="p-3">
              <legend>User Details</legend>

              <div class="row row-cols-2 mx-auto p-3">
                <label for="photo" class="form-label col-4">Photos</label>
                <div class="col-8 mb-2">
                  <input
                    type="file"
                    name="photo"
                    id="photo"
                    accept=".jpg,.png"
                    class="form-control" />
                  <span
                    id="photo-error"
                    class="text-danger fs-6 d-none form-error"></span>
                </div>

                <label for="first-name" class="form-label col-4">
                  First Name
                </label>
                <div class="col-8 mb-2">
                  <input
                    type="text"
                    name="first-name"
                    id="first-name"
                    class="form-control" />
                </div>

                <label for="last-name" class="form-label col-4">
                  Last Name
                </label>
                <div class="col-8 mb-2">
                  <input
                    type="text"
                    name="last-name"
                    id="last-name"
                    class="form-control" />
                </div>

                <label for="age" class="form-label col-4">Age</label>
                <div class="col-8 mb-2">
                  <input
                    type="number"
                    name="age"
                    id="age"
                    class="form-control"
                    min="18" />
                  <span
                    id="age-error"
                    class="text-danger fs-6 d-none form-error"></span>
                </div>

                <label for="birthday" class="form-label col-4">Birthday</label>
                <div class="col-8 mb-2">
                  <input
                    type="date"
                    name="birthday"
                    id="birthday"
                    class="form-control" />
                </div>

                <p class="form-label col-4">Sex</p>
                <div class="col-8 mb-2 d-flex">
                  <div class="form-check me-3">
                    <input
                      type="radio"
                      name="sex"
                      id="male"
                      class="form-check-input"
                      value="Male"
                      checked />
                    <label for="male" class="form-check-label">Male</label>
                  </div>
                  <div class="form-check">
                    <input
                      type="radio"
                      name="sex"
                      id="female"
                      class="form-check-input"
                      value="Female" />
                    <label for="female" class="form-check-label">Female</label>
                  </div>
                </div>

                <p class="form-label col-4">Device Used</p>
                <div class="col-8 mb-2">
                  <select name="device" id="device" class="form-select">
                    <option value="windows" selected>Windows</option>
                    <option value="macos">MacOS</option>
                  </select>
                </div>
              </div>
            </fieldset>
            <div class="mb-3">
              <div class="form-check">
                <input
                  type="checkbox"
                  name="terms"
                  id="terms"
                  class="form-check-input" />
                <label for="terms" class="form-check-label">
                  I accept the terms & conditions
                </label>
              </div>
              <span
                id="terms-error"
                class="text-danger fs-6 d-none form-error"></span>
            </div>
            <input
              type="button"
              onclick="validateForm()"
              class="btn btn-primary w-25"
              value="Submit" />
            <div id="confirmation-modal" class="modal" tabindex="-1">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title">Confirm Information</h5>
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div id="info-container">
                      <div class="d-flex">
                        <p class="w-25 fw-bold">Email Address:</p>
                        <p id="email-address-confirm"></p>
                      </div>
                      <div class="d-flex">
                        <p class="w-25 fw-bold">Photo:</p>
                        <p id="photo-confirm"></p>
                      </div>
                      <div class="d-flex">
                        <p class="w-25 fw-bold">First Name:</p>
                        <p id="first-name-confirm"></p>
                      </div>
                      <div class="d-flex">
                        <p class="w-25 fw-bold">Last Name:</p>
                        <p id="last-name-confirm"></p>
                      </div>
                      <div class="d-flex">
                        <p class="w-25 fw-bold">Age:</p>
                        <p id="age-confirm"></p>
                      </div>
                      <div class="d-flex">
                        <p class="w-25 fw-bold">Birthday:</p>
                        <p id="birthday-confirm"></p>
                      </div>
                      <div class="d-flex">
                        <p class="w-25 fw-bold">Sex:</p>
                        <p id="sex-confirm"></p>
                      </div>
                      <div class="d-flex">
                        <p class="w-25 fw-bold">Device Used:</p>
                        <p id="device-confirm"></p>
                      </div>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button
                      type="button"
                      class="btn btn-secondary"
                      data-bs-dismiss="modal">
                      Close
                    </button>
                    <input
                      type="submit"
                      name="submit"
                      id="submit"
                      value="Confirm"
                      class="btn btn-primary" />
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
      </main>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      function validateForm() {
        let hasError = false;

        // Reset error messages
        const formErrors = document.getElementsByClassName("form-error");
        for (let fe of formErrors) {
          fe.textContent = "";
          fe.classList.add("d-none");
        }

        // Email address is required
        const emailAddressInput = document.getElementById("email-address");
        if (emailAddressInput.value === "") {
          const emailAddressError = document.getElementById(
            "email-address-error"
          );
          emailAddressError.classList.remove("d-none");
          emailAddressError.textContent = "Email address is required";
          hasError = true;
        }

        let passwordErrorText = "";
        const passwordError = document.getElementById("password-error");
        // 1. Password is required
        // 2. Password must contain at least 8 characters
        const passwordInput = document.getElementById("password");
        if (passwordInput.value === "") {
          passwordError.classList.remove("d-none");
          passwordErrorText += "Password is required\n";
          hasError = true;
        } else if (passwordInput.value.length < 8) {
          passwordError.classList.remove("d-none");
          passwordErrorText += "Password must contain at least 8 characters\n";
          hasError = true;
        }

        // 3. Password did not match
        const confirmPasswordInput =
          document.getElementById("confirm-password");
        if (passwordInput.value !== confirmPasswordInput.value) {
          passwordError.classList.remove("d-none");
          passwordErrorText += "Password did not match";
          hasError = true;
        }

        passwordError.textContent = passwordErrorText;

        // 4. Photo is required
        const photoInput = document.getElementById("photo");
        if (photoInput.value === "") {
          const photoError = document.getElementById("photo-error");
          photoError.classList.remove("d-none");
          photoError.textContent = "Photo is required";
          hasError = true;
        }

        // 5. User should be 18 years old and above
        const ageInput = document.getElementById("age");
        if (ageInput.value < 18) {
          const ageError = document.getElementById("age-error");
          ageError.classList.remove("d-none");
          ageError.textContent = "User should be 18 years old and above";
          hasError = true;
        }

        // 6. Please agree to the terms and conditions
        const termsCheckbox = document.getElementById("terms");
        if (!termsCheckbox.checked) {
          const termsError = document.getElementById("terms-error");
          termsError.classList.remove("d-none");
          termsError.textContent = "Please agree to the terms and conditions";
          hasError = true;
        }

        // if there are no errors, call openConfirmModal()
        // else scroll to top
        if (!hasError) {
          openConfirmModal();
        } else {
          window.scrollTo(0, 0);
        }
      }

      function openConfirmModal() {
        const emailAddressInput = document.getElementById("email-address");
        const emailAddressConfirm = document.getElementById(
          "email-address-confirm"
        );
        emailAddressConfirm.textContent = emailAddressInput.value;

        const photoInput = document.getElementById("photo");
        const photoConfirm = document.getElementById("photo-confirm");
        photoConfirm.textContent = photoInput.value;

        const firstNameInput = document.getElementById("first-name");
        const firstNameConfirm = document.getElementById("first-name-confirm");
        firstNameConfirm.textContent = firstNameInput.value;

        const lastNameInput = document.getElementById("last-name");
        const lastNameConfirm = document.getElementById("last-name-confirm");
        lastNameConfirm.textContent = lastNameInput.value;

        const ageInput = document.getElementById("age");
        const ageConfirm = document.getElementById("age-confirm");
        ageConfirm.textContent = ageInput.value;

        const birthdayInput = document.getElementById("birthday");
        const birthdayConfirm = document.getElementById("birthday-confirm");
        birthdayConfirm.textContent = birthdayInput.value;

        const sexInput = document.querySelector('input[name="sex"]:checked');
        const sexConfirm = document.getElementById("sex-confirm");
        sexConfirm.textContent = sexInput.value;

        const deviceSelect = document.getElementById("device");
        const deviceConfirm = document.getElementById("device-confirm");
        deviceConfirm.textContent =
          deviceSelect.options[deviceSelect.selectedIndex].textContent;

        const confirmationModal = new bootstrap.Modal(
          document.getElementById("confirmation-modal"),
          {}
        );
        confirmationModal.show();
      }

      function alertSuccess() {
        alert("Successfully registered!");
      }
    </script>
  </body>
</html>
